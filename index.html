<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="swngr">
  <meta name="theme-color" content="#000000">
  <title>swngr</title>
  <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.2/babel.min.js"></script>
  <style>
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    html,body{width:100%;height:100%;overflow:hidden;background:#000;
      font-family:-apple-system,'SF Pro Text','Helvetica Neue',sans-serif;
      -webkit-font-smoothing:antialiased;}
    #root{position:fixed;inset:0;}
    body{position:fixed;overflow:hidden;}
    img{-webkit-touch-callout:none;-webkit-user-select:none;pointer-events:none;}
    button{-webkit-tap-highlight-color:transparent;}
    input,textarea{-webkit-appearance:none;border-radius:0;}
    *{-webkit-overflow-scrolling:touch;}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    @keyframes pop{0%{transform:scale(0.85);opacity:0}60%{transform:scale(1.06)}100%{transform:scale(1);opacity:1}}
    @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.35}}
    @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
    input[type=range]{-webkit-appearance:none;appearance:none;height:4px;border-radius:2px;background:#E5E5EA;cursor:pointer;}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:26px;height:26px;border-radius:50%;background:#fff;box-shadow:0 2px 10px rgba(0,0,0,0.18);}
    ::-webkit-scrollbar{width:0;height:0;}
    ::placeholder{color:#C7C7CC;}
    .press:active{transform:scale(0.95);}
  </style>
</head>
<body>
<div id="root"></div>
<div id="loading" style="position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;font-family:-apple-system,sans-serif;">
  <div style="font-family:'Arial Black','Arial Bold',Arial,sans-serif;font-weight:900;font-size:38px;color:white;letter-spacing:2px;margin-bottom:44px;user-select:none">swngr</div>
  <div style="width:28px;height:28px;border:2.5px solid rgba(255,255,255,0.15);border-top-color:rgba(255,255,255,0.8);border-radius:50%;animation:spin 0.85s linear infinite"></div>
  <style>@keyframes spin{to{transform:rotate(360deg)}}</style>
</div>
<script>
  window.addEventListener('error', function(e) {
    document.getElementById('loading').innerHTML = '<div style="color:white;padding:30px;text-align:center;font-family:-apple-system,sans-serif"><div style="font-size:40px;margin-bottom:16px">‚ö†Ô∏è</div><div style="font-size:18px;font-weight:600;margin-bottom:10px">Loading error</div><div style="font-size:14px;opacity:0.6;word-break:break-all">'+e.message+'</div></div>';
  });
</script>
<script type="text/babel">
const {useState,useEffect,useRef,useCallback,createContext,useContext}=React;

/* COLORS - Apple HIG */
const C={
  bg:"#FFFFFF",bg2:"#F2F2F7",bg3:"#E5E5EA",
  label:"#000000",label2:"#3C3C43",
  gray:"#8E8E93",gray2:"#AEAEB2",gray3:"#C7C7CC",
  gray4:"#D1D1D6",gray5:"#E5E5EA",gray6:"#F2F2F7",
  sep:"rgba(60,60,67,0.29)",
  blue:"#007AFF",green:"#34C759",red:"#FF3B30",
  black:"#000000",white:"#FFFFFF",
};

/* DATA */
const DB={
  me:{id:"me",name:"Alex",age:28,verified:true,handicap:4,
    bio:"Scratch golfer chasing the dream. Early bird, love a bet on the back 9.",
    tags:["Competitive","Early Bird","Driving","Betting"],
    lookingFor:["18 Holes","Matchplay"],
    photos:["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=85"],
    discoveryEnabled:true},
  profiles:[
    {id:"p1",name:"Ryan",age:24,verified:true,distance:1.2,handicap:0,active:true,
     tags:["Driving","Drinking","Betting","Music"],lookingFor:["18 Holes","Competitive"],
     bio:"Best joke on the course is my putting. Iron covers? Swipe left.",
     photos:["https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=800&q=85",
             "https://images.unsplash.com/photo-1593111774240-d529f12cf4bb?w=800&q=85",
             "https://images.unsplash.com/photo-1510541591230-4e6b8b2c7b08?w=800&q=85"]},
    {id:"p2",name:"Jake",age:29,verified:true,distance:2.8,handicap:8,active:false,
     tags:["Chill","Walking","Early Bird","Competitive"],lookingFor:["18 Holes","Practice Range"],
     bio:"Triple bogey player in reality. Let's suffer together on the back 9.",
     photos:["https://images.unsplash.com/photo-1587174486073-ae5e5cff23aa?w=800&q=85",
             "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&q=85"]},
    {id:"p3",name:"Marcus",age:33,verified:false,distance:5.5,handicap:15,active:true,
     tags:["Cart","Drinking","Sunset 9","Chill"],lookingFor:["9 Holes","Practice Range"],
     bio:"Golf cart sommelier. Break 90 when the wind's right and beer's cold.",
     photos:["https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?w=800&q=85"]},
    {id:"p4",name:"Tom",age:41,verified:true,distance:3.1,handicap:4,active:false,
     tags:["Competitive","Driving","Putting","Matchplay"],lookingFor:["Matchplay","18 Holes"],
     bio:"4 handicap chasing scratch. Don't talk during my backswing.",
     photos:["https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=800&q=85",
             "https://images.unsplash.com/photo-1561740952-aa4a895f0f1b?w=800&q=85"]},
    {id:"p5",name:"Chris",age:27,verified:true,distance:8.3,handicap:22,active:true,
     tags:["Chill","Drinking","Betting","Beginner-Friendly"],lookingFor:["9 Holes","Scramble"],
     bio:"22 handicap but a 10/10 time guaranteed. Low stakes, maximum fun.",
     photos:["https://images.unsplash.com/photo-1562788869-4ed32648eb72?w=800&q=85"]},
    {id:"p6",name:"Liam",age:31,verified:true,distance:4.0,handicap:12,active:true,
     tags:["Walking","Music","Sunset 9","Chill"],lookingFor:["18 Holes","Scramble"],
     bio:"Fairway finder. Rough regular. I make bogey look athletic.",
     photos:["https://images.unsplash.com/photo-1552058544-f2b08422138a?w=800&q=85"]},
  ],
  matches:[
    {id:"m1",userId:"p2",name:"Jake",age:29,handicap:8,
     photo:"https://images.unsplash.com/photo-1587174486073-ae5e5cff23aa?w=300&q=85",
     messages:[
       {id:"a",from:"p2",text:"Hey! Love your golf vibe",time:"10:23",read:true},
       {id:"b",from:"me",text:"Thanks! Keen for a round this weekend?",time:"10:25",read:true},
       {id:"c",from:"p2",text:"Saturday morning? Let's do it",time:"10:26",read:false},
     ]},
    {id:"m2",userId:"p4",name:"Tom",age:41,handicap:4,
     photo:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=300&q=85",
     messages:[
       {id:"d",from:"me",text:"Great match! 7am Saturday?",time:"Yesterday",read:true},
       {id:"e",from:"p4",text:"See you at 7",time:"Yesterday",read:true},
     ]},
    {id:"m3",userId:"p3",name:"Marcus",age:33,handicap:15,
     photo:"https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?w=300&q=85",
     messages:[
       {id:"f",from:"p3",text:"Ready to hit the course",time:"3h ago",read:true},
     ]},
  ],
};

const Ctx=createContext(null);
const useCtx=()=>useContext(Ctx);
const FALLBACK="https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=300&q=60";

/* LOGO - exact match: "swngr" wide bold lowercase, no golfball */
function Logo({size=32,light=true}){
  const col=light?C.white:C.black;
  const h=size*1.1;
  return(
    <div style={{
      fontFamily:"'Arial Black','Arial Bold',Arial,sans-serif",
      fontWeight:900,
      fontSize:size,
      color:col,
      letterSpacing:size*0.04,
      lineHeight:1,
      fontStretch:"expanded",
      textTransform:"lowercase",
      display:"block",
      userSelect:"none",
    }}>swngr</div>
  );
}

/* LAZY IMAGE */
function Img({src,style,fit="cover"}){
  const[s,setS]=useState("load");
  useEffect(()=>{
    setS("load");
    const i=new Image();
    i.onload=()=>setS("ok");
    i.onerror=()=>setS("err");
    i.src=src;
  },[src]);
  return(
    <div style={{position:"relative",overflow:"hidden",...style}}>
      {s==="load"&&<div style={{position:"absolute",inset:0,
        background:"linear-gradient(90deg,#F2F2F7 25%,#FAFAFA 50%,#F2F2F7 75%)",
        backgroundSize:"200% 100%",animation:"shimmer 1.2s infinite"}}/>}
      <img src={s==="err"?FALLBACK:src}
        style={{width:"100%",height:"100%",objectFit:fit,display:"block",
          opacity:s==="load"?0:1,transition:"opacity 0.25s"}}
        onLoad={()=>setS("ok")} onError={()=>setS("err")}/>
    </div>
  );
}

/* CHIP */
const REDTAGS=new Set(["Betting","Competitive","Matchplay"]);
function Chip({label,on,onClick,sm}){
  const red=REDTAGS.has(label);
  return(
    <button onClick={onClick} style={{
      padding:sm?"3px 9px":"5px 12px",borderRadius:20,border:"none",
      background:on?(red?C.red:C.black):(red?"#FFF0EF":C.gray6),
      color:on?C.white:(red?C.red:C.label2),
      fontSize:sm?11:13,fontWeight:500,cursor:onClick?"pointer":"default",
      whiteSpace:"nowrap",lineHeight:1.5,fontFamily:"inherit",
      transition:"all 0.15s",flexShrink:0,
    }}>{label}</button>
  );
}

/* SHARED */
function Spin({sz=22,light=false}){
  return <div style={{width:sz,height:sz,flexShrink:0,
    border:`2.5px solid ${light?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"}`,
    borderTopColor:light?C.white:C.black,
    borderRadius:"50%",animation:"spin 0.75s linear infinite"}}/>;
}
function Field({placeholder,value,onChange,type="text"}){
  return(
    <input type={type} value={value} onChange={e=>onChange(e.target.value)}
      placeholder={placeholder}
      style={{width:"100%",padding:"14px 16px",background:C.gray6,
        border:"none",borderRadius:12,fontSize:17,color:C.black,
        outline:"none",fontFamily:"inherit"}}
      onFocus={e=>e.target.style.background=C.gray5}
      onBlur={e=>e.target.style.background=C.gray6}/>
  );
}
function Btn({label,onPress,loading,disabled}){
  return(
    <button onClick={onPress} disabled={loading||disabled} className="press" style={{
      width:"100%",padding:"16px",background:(loading||disabled)?C.gray4:C.black,
      color:C.white,border:"none",borderRadius:14,
      fontSize:17,fontWeight:600,cursor:(loading||disabled)?"default":"pointer",
      display:"flex",alignItems:"center",justifyContent:"center",gap:10,
      fontFamily:"inherit",transition:"background 0.15s",
    }}>
      {loading?<Spin light/>:label}
    </button>
  );
}
function IcoBack(){
  return(
    <svg width="10" height="18" viewBox="0 0 10 18" fill="none">
      <path d="M9 1L1 9l8 8" stroke={C.blue} strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round"/>
    </svg>
  );
}
function IcoVerified(){
  return(
    <svg width="15" height="15" viewBox="0 0 15 15" fill="none">
      <circle cx="7.5" cy="7.5" r="7.5" fill={C.blue}/>
      <path d="M4 7.5l2.5 2.5 4.5-5" stroke="white" strokeWidth="1.6" strokeLinecap="round" strokeLinejoin="round"/>
    </svg>
  );
}
function Toggle({on,set}){
  return(
    <div onClick={set} style={{width:52,height:31,borderRadius:16,
      background:on?"#34C759":C.gray4,position:"relative",cursor:"pointer",
      transition:"background 0.25s",flexShrink:0}}>
      <div style={{position:"absolute",top:2.5,
        left:on?23:2.5,width:26,height:26,borderRadius:13,
        background:C.white,boxShadow:"0 2px 8px rgba(0,0,0,0.18)",
        transition:"left 0.25s cubic-bezier(0.25,0.46,0.45,0.94)"}}/>
    </div>
  );
}

/* ======================== SCREENS ======================== */

function Splash({next}){
  useEffect(()=>{const t=setTimeout(next,2200);return()=>clearTimeout(t);},[]);
  return(
    <div style={{position:"absolute",inset:0,background:C.black,
      display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:56}}>
      <div style={{animation:"fadeUp 0.8s cubic-bezier(0.22,1,0.36,1) forwards"}}>
        <Logo size={40} light/>
      </div>
      <div style={{width:28,height:28,
        border:"2.5px solid rgba(255,255,255,0.12)",
        borderTopColor:"rgba(255,255,255,0.65)",
        borderRadius:"50%",animation:"spin 0.85s linear infinite"}}/>
    </div>
  );
}

function GrassLoad({next}){
  useEffect(()=>{const t=setTimeout(next,1900);return()=>clearTimeout(t);},[]);
  return(
    <div style={{position:"absolute",inset:0,
      background:"linear-gradient(160deg,#2A6030 0%,#1A7A3C 50%,#0D5C28 100%)",
      display:"flex",alignItems:"center",justifyContent:"center"}}>
      <div style={{position:"absolute",inset:0,opacity:0.12,
        backgroundImage:"repeating-linear-gradient(78deg,transparent,transparent 5px,rgba(255,255,255,0.06) 5px,rgba(255,255,255,0.06) 10px)"}}/>
      <div style={{animation:"pop 0.7s cubic-bezier(0.34,1.56,0.64,1) forwards"}}>
        <Logo size={44} light/>
      </div>
    </div>
  );
}

function Auth({next}){
  const[mode,setMode]=useState("main");
  const[email,setEmail]=useState("");
  const[pass,setPass]=useState("");
  const[loading,setLoading]=useState(false);
  const[err,setErr]=useState("");

  const go=async()=>{
    if(!email||!pass){setErr("Enter your email and password.");return;}
    setLoading(true);setErr("");
    await new Promise(r=>setTimeout(r,900));
    next();
  };
  const social=async()=>{
    setLoading(true);
    await new Promise(r=>setTimeout(r,700));
    next();
  };

  if(mode==="email") return(
    <div style={{position:"absolute",inset:0,background:C.bg,display:"flex",flexDirection:"column"}}>
      <div style={{paddingTop:"env(safe-area-inset-top,44px)"}}/>
      <div style={{padding:"8px 8px 0"}}>
        <button onClick={()=>{setMode("main");setErr("");}} style={{
          background:"none",border:"none",cursor:"pointer",
          padding:"8px 12px",display:"flex",alignItems:"center",gap:6,
          color:C.blue,fontSize:17,fontFamily:"inherit"}}>
          <IcoBack/> Back
        </button>
      </div>
      <div style={{flex:1,padding:"28px 24px 0",display:"flex",flexDirection:"column"}}>
        <h1 style={{fontSize:30,fontWeight:700,letterSpacing:"-0.5px",marginBottom:8}}>Sign in</h1>
        <p style={{color:C.gray,fontSize:16,marginBottom:28}}>Welcome back to swngr</p>
        {err&&<div style={{background:"#FFF2F0",border:"1px solid #FFCCC7",borderRadius:10,
          padding:"10px 14px",fontSize:14,color:C.red,marginBottom:16}}>{err}</div>}
        <div style={{display:"flex",flexDirection:"column",gap:10}}>
          <Field placeholder="Email" value={email} onChange={setEmail} type="email"/>
          <Field placeholder="Password" value={pass} onChange={setPass} type="password"/>
        </div>
      </div>
      <div style={{padding:"20px 24px",paddingBottom:"max(24px,env(safe-area-inset-bottom,24px))"}}>
        <Btn label="Continue" onPress={go} loading={loading}/>
      </div>
    </div>
  );

  return(
    <div style={{position:"absolute",inset:0,
      background:"linear-gradient(180deg,#0A0A0A 0%,#141414 100%)",
      display:"flex",flexDirection:"column"}}>
      <div style={{paddingTop:"env(safe-area-inset-top,44px)"}}/>
      <div style={{flex:1,display:"flex",flexDirection:"column",
        alignItems:"center",justifyContent:"center",gap:12}}>
        <div style={{animation:"fadeUp 0.8s ease forwards"}}>
          <Logo size={38} light/>
        </div>
        <p style={{color:"rgba(255,255,255,0.4)",fontSize:15,marginTop:6}}>
          Find your perfect golf partner
        </p>
      </div>
      <div style={{padding:"0 24px",display:"flex",flexDirection:"column",gap:12}}>
        <button onClick={social} className="press" style={{
          background:C.white,color:C.black,border:"none",borderRadius:14,
          padding:"15px 20px",fontSize:16,fontWeight:600,
          cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,
          fontFamily:"inherit"}}>
          <svg width="17" height="17" viewBox="0 0 20 20" fill="black">
            <path d="M13.18 0c.07.9-.26 1.8-.77 2.47-.52.68-1.35 1.2-2.18 1.14-.09-.87.29-1.78.77-2.4C11.53.54 12.42.04 13.18 0zm2.76 5.03c-.1.06-1.89 1.09-1.87 3.26.02 2.56 2.25 3.42 2.27 3.43-.02.08-.35 1.21-1.16 2.36-.7 1.01-1.43 2.02-2.55 2.04-1.1.02-1.45-.65-2.71-.65-1.27 0-1.66.63-2.7.67-1.08.04-1.9-1.09-2.61-2.09C3.27 12.09 2.2 9.5 2.2 7.03c0-3.43 2.23-5.24 4.43-5.27 1.07-.02 2.08.72 2.74.72.65 0 1.88-.89 3.16-.76.54.02 2.05.22 3.01 1.64l.4-.33z"/>
          </svg>
          Continue with Apple
        </button>
        <button onClick={social} className="press" style={{
          background:"rgba(255,255,255,0.08)",color:C.white,
          border:"1px solid rgba(255,255,255,0.14)",borderRadius:14,
          padding:"15px 20px",fontSize:16,fontWeight:500,
          cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,
          fontFamily:"inherit"}}>
          Continue with Phone
        </button>
        <button onClick={()=>setMode("email")} className="press" style={{
          background:"transparent",color:"rgba(255,255,255,0.4)",
          border:"none",padding:"14px",fontSize:15,
          cursor:"pointer",fontFamily:"inherit"}}>
          Use email instead
        </button>
      </div>
      <div style={{padding:"14px 36px",
        paddingBottom:"max(28px,env(safe-area-inset-bottom,28px))",
        textAlign:"center"}}>
        <span style={{color:"rgba(255,255,255,0.22)",fontSize:12,lineHeight:1.7}}>
          By continuing you agree to our{" "}
          <span style={{color:"rgba(255,255,255,0.45)",textDecoration:"underline",cursor:"pointer"}}>Terms</span>
          {" & "}
          <span style={{color:"rgba(255,255,255,0.45)",textDecoration:"underline",cursor:"pointer"}}>Privacy Policy</span>
        </span>
      </div>
    </div>
  );
}

const TAGS=["Driving","Putting","Drinking","Betting","Music","Chill",
  "Competitive","Early Bird","Sunset 9","Walking","Cart","Beginner-Friendly","Matchplay"];
const LF=["Golf Partner","9 Holes","18 Holes","Practice Range","Tournaments","Scramble","Matchplay"];

function Onboard({done}){
  const[step,setStep]=useState(0);
  const[d,setD]=useState({name:"",age:"",hcp:"",hcpQ:"",lf:[],tags:[],bio:"",photos:[]});
  const[ul,setUl]=useState(false);
  const up=(k,v)=>setD(x=>({...x,[k]:v}));
  const tog=(k,v)=>setD(x=>({...x,[k]:x[k].includes(v)?x[k].filter(i=>i!==v):[...x[k],v]}));

  const ok=[
    ()=>d.name.trim()&&d.age,
    ()=>d.hcp!=="",
    ()=>d.lf.length>0,
    ()=>d.tags.length>0,
    ()=>d.photos.length>=1,
  ];

  const addPic=async()=>{
    if(d.photos.length>=6)return;
    setUl(true);await new Promise(r=>setTimeout(r,500));
    const pool=["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80",
      "https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=800&q=80",
      "https://images.unsplash.com/photo-1587174486073-ae5e5cff23aa?w=800&q=80"];
    up("photos",[...d.photos,pool[d.photos.length%pool.length]].slice(0,6));
    setUl(false);
  };
  const remPic=i=>up("photos",d.photos.filter((_,j)=>j!==i));

  const N=5;
  const steps=[
    <div key={0}>
      <div style={{fontSize:42,marginBottom:18}}>üëã</div>
      <h2 style={SH}>What's your name?</h2>
      <p style={SP}>You'll be shown to other golfers</p>
      <div style={{display:"flex",flexDirection:"column",gap:10,marginTop:24}}>
        <Field placeholder="First name" value={d.name} onChange={v=>up("name",v)}/>
        <Field placeholder="Age" value={d.age} onChange={v=>up("age",v.replace(/\D/,""))} type="number"/>
      </div>
    </div>,

    <div key={1}>
      <div style={{fontSize:42,marginBottom:18}}>‚õ≥</div>
      <h2 style={SH}>Your handicap?</h2>
      <p style={SP}>Helps match you with compatible golfers</p>
      <div style={{marginTop:24}}>
        <Field placeholder="e.g. 0, 12, 28" value={d.hcp} onChange={v=>up("hcp",v)} type="number"/>
        <div style={{display:"flex",flexWrap:"wrap",gap:8,marginTop:14}}>
          {[["Scratch","0"],["1-5","3"],["6-15","10"],["16-28","22"],["28+","36"]].map(([l,v])=>(
            <button key={l} onClick={()=>{up("hcp",v);up("hcpQ",l);}} style={{
              padding:"8px 16px",borderRadius:20,fontSize:14,cursor:"pointer",
              border:`1.5px solid ${d.hcpQ===l?C.black:C.gray4}`,
              background:d.hcpQ===l?C.black:C.bg,
              color:d.hcpQ===l?C.white:C.label2,
              fontWeight:d.hcpQ===l?600:400,fontFamily:"inherit",
              transition:"all 0.15s"}}>{l}</button>
          ))}
        </div>
      </div>
    </div>,

    <div key={2}>
      <div style={{fontSize:42,marginBottom:18}}>üèåÔ∏è</div>
      <h2 style={SH}>Looking for?</h2>
      <p style={SP}>Select everything that applies</p>
      <div style={{display:"flex",flexDirection:"column",gap:8,marginTop:20}}>
        {LF.map(opt=>{
          const sel=d.lf.includes(opt);
          return(
            <button key={opt} onClick={()=>tog("lf",opt)} style={{
              padding:"14px 16px",borderRadius:12,cursor:"pointer",textAlign:"left",
              border:`1.5px solid ${sel?C.black:C.gray5}`,
              background:sel?C.black:C.bg,color:sel?C.white:C.black,
              fontSize:16,fontWeight:sel?600:400,
              display:"flex",alignItems:"center",justifyContent:"space-between",
              fontFamily:"inherit",transition:"all 0.15s"}}>
              {opt}
              {sel&&<span style={{fontSize:13,opacity:0.7}}>checkmark</span>}
            </button>
          );
        })}
      </div>
    </div>,

    <div key={3}>
      <div style={{fontSize:42,marginBottom:18}}>üè∑Ô∏è</div>
      <h2 style={SH}>Your golf vibe?</h2>
      <p style={SP}>Pick at least one tag</p>
      <div style={{display:"flex",flexWrap:"wrap",gap:8,marginTop:20}}>
        {TAGS.map(t=><Chip key={t} label={t} on={d.tags.includes(t)} onClick={()=>tog("tags",t)}/>)}
      </div>
    </div>,

    <div key={4}>
      <div style={{fontSize:42,marginBottom:18}}>üì∏</div>
      <h2 style={SH}>Add photos</h2>
      <p style={SP}>At least 1 photo, up to 6</p>
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,marginTop:20}}>
        {Array.from({length:6}).map((_,i)=>{
          const ph=d.photos[i];
          return(
            <div key={i} onClick={!ph?addPic:undefined} style={{
              aspectRatio:"1",borderRadius:12,overflow:"hidden",
              background:C.gray6,position:"relative",
              border:ph?"none":`2px dashed ${C.gray4}`,cursor:"pointer"}}>
              {ph
                ?<img src={ph} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
                :<div style={{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}>
                  {ul&&i===d.photos.length?<Spin dark/>:<span style={{fontSize:26,color:C.gray3}}>+</span>}
                </div>}
              {ph&&<button onClick={e=>{e.stopPropagation();remPic(i);}} style={{
                position:"absolute",top:5,right:5,width:22,height:22,borderRadius:11,
                background:"rgba(0,0,0,0.5)",border:"none",color:C.white,
                fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}}>
                x</button>}
            </div>
          );
        })}
      </div>
      <div style={{marginTop:18}}>
        <textarea value={d.bio} onChange={e=>up("bio",e.target.value.slice(0,150))}
          placeholder="Short bio..."
          style={{width:"100%",background:C.gray6,border:"none",borderRadius:12,
            padding:"14px 16px",fontSize:15,resize:"none",height:90,
            fontFamily:"inherit",color:C.black,outline:"none"}}/>
        <div style={{textAlign:"right",fontSize:11,color:C.gray,marginTop:4}}>{d.bio.length}/150</div>
      </div>
    </div>,
  ];

  return(
    <div style={{position:"absolute",inset:0,background:C.bg,display:"flex",flexDirection:"column"}}>
      <div style={{paddingTop:"env(safe-area-inset-top,44px)",flexShrink:0}}/>
      <div style={{padding:"12px 24px 0",flexShrink:0}}>
        <div style={{display:"flex",gap:4}}>
          {Array.from({length:N}).map((_,i)=>(
            <div key={i} style={{flex:1,height:2.5,borderRadius:2,
              background:i<=step?C.black:C.gray5,transition:"background 0.3s"}}/>
          ))}
        </div>
      </div>
      <div style={{flex:1,padding:"22px 24px 0",overflowY:"auto"}}>{steps[step]}</div>
      <div style={{padding:"14px 24px",
        paddingBottom:"max(24px,env(safe-area-inset-bottom,24px))",
        display:"flex",gap:10,flexShrink:0}}>
        {step>0&&<button onClick={()=>setStep(s=>s-1)} style={{
          flex:1,padding:"15px",borderRadius:14,
          border:`1.5px solid ${C.gray4}`,background:C.bg,
          fontSize:16,cursor:"pointer",fontFamily:"inherit",color:C.label2}}>Back</button>}
        <div style={{flex:2}}>
          <Btn label={step===N-1?"Start Swiping":"Continue"}
            onPress={()=>step<N-1?setStep(s=>s+1):done(d)}
            disabled={!ok[step]()}/>
        </div>
      </div>
    </div>
  );
}
const SH={fontSize:28,fontWeight:700,letterSpacing:"-0.5px",marginBottom:6};
const SP={color:C.gray,fontSize:15};

/* SWIPE CARD */
function Card({profile,onSwipe,isTop,zOff}){
  const[pi,setPi]=useState(0);
  const[drag,setDrag]=useState({x:0,y:0});
  const dn=useRef(false);
  const orig=useRef({x:0,y:0});
  const gone=useRef(false);

  useEffect(()=>{profile.photos.forEach(s=>{const i=new Image();i.src=s;});},[profile.id]);

  const sd=(x,y)=>{if(!isTop||gone.current)return;dn.current=true;orig.current={x,y};};
  const sm=(x,y)=>{if(!dn.current)return;setDrag({x:x-orig.current.x,y:y-orig.current.y});};
  const su=()=>{
    if(!dn.current)return;dn.current=false;
    const{x,y}=drag;
    if(Math.abs(x)>75){gone.current=true;setDrag({x:x>0?600:-600,y:y*1.3});setTimeout(()=>onSwipe(x>0?"like":"pass"),300);}
    else if(y<-90){gone.current=true;setDrag({x:0,y:-700});setTimeout(()=>onSwipe("super"),300);}
    else setDrag({x:0,y:0});
  };

  const rot=drag.x*0.065;
  const lOp=Math.max(0,Math.min(drag.x/75,1));
  const pOp=Math.max(0,Math.min(-drag.x/75,1));

  return(
    <div onMouseDown={e=>sd(e.clientX,e.clientY)}
      onMouseMove={e=>sm(e.clientX,e.clientY)}
      onMouseUp={su} onMouseLeave={su}
      onTouchStart={e=>sd(e.touches[0].clientX,e.touches[0].clientY)}
      onTouchMove={e=>{e.preventDefault();sm(e.touches[0].clientX,e.touches[0].clientY);}}
      onTouchEnd={su}
      style={{
        position:"absolute",inset:0,
        transform:`translateX(${drag.x}px) translateY(${drag.y+zOff}px) rotate(${rot}deg) scale(${1-zOff*0.004})`,
        transition:dn.current?"none":"transform 0.35s cubic-bezier(0.25,0.46,0.45,0.94)",
        cursor:isTop?(dn.current?"grabbing":"grab"):"default",
        userSelect:"none",touchAction:"none"}}>

      {isTop&&<>
        <div style={{position:"absolute",top:44,left:18,zIndex:10,
          border:"3px solid #34C759",color:"#34C759",borderRadius:8,
          padding:"4px 12px",fontSize:22,fontWeight:800,letterSpacing:1,
          transform:"rotate(-15deg)",opacity:lOp,pointerEvents:"none",fontFamily:"inherit"}}>LIKE</div>
        <div style={{position:"absolute",top:44,right:18,zIndex:10,
          border:"3px solid #FF3B30",color:"#FF3B30",borderRadius:8,
          padding:"4px 12px",fontSize:22,fontWeight:800,letterSpacing:1,
          transform:"rotate(15deg)",opacity:pOp,pointerEvents:"none",fontFamily:"inherit"}}>NOPE</div>
      </>}

      <div style={{width:"100%",height:"100%",borderRadius:20,overflow:"hidden",
        background:C.bg,
        boxShadow:"0 10px 50px rgba(0,0,0,0.14),0 2px 8px rgba(0,0,0,0.07)",
        display:"flex",flexDirection:"column"}}>

        {/* Photo 65% */}
        <div style={{flex:"0 0 65%",position:"relative",overflow:"hidden",cursor:"pointer"}}
          onClick={()=>isTop&&setPi(i=>(i+1)%profile.photos.length)}>
          <Img src={profile.photos[pi]} style={{width:"100%",height:"100%"}}/>
          {profile.photos.length>1&&(
            <div style={{position:"absolute",top:12,left:0,right:0,
              display:"flex",justifyContent:"center",gap:5}}>
              {profile.photos.map((_,i)=>(
                <div key={i} style={{width:6,height:6,borderRadius:3,
                  background:i===pi?C.white:"rgba(255,255,255,0.38)",
                  transition:"all 0.2s"}}/>
              ))}
            </div>
          )}
          <div style={{position:"absolute",bottom:0,left:0,right:0,height:90,
            background:"linear-gradient(transparent,rgba(0,0,0,0.28))"}}/>
          {profile.active&&(
            <div style={{position:"absolute",bottom:12,left:14,
              background:"rgba(0,0,0,0.42)",borderRadius:20,
              padding:"3px 10px",display:"flex",alignItems:"center",gap:5,
              backdropFilter:"blur(8px)"}}>
              <div style={{width:6,height:6,borderRadius:3,background:"#34C759",animation:"pulse 2s infinite"}}/>
              <span style={{color:C.white,fontSize:11,fontWeight:500}}>Recently active</span>
            </div>
          )}
        </div>

        {/* Info 35% */}
        <div style={{flex:1,padding:"11px 15px 9px",
          display:"flex",flexDirection:"column",gap:4,overflow:"hidden"}}>
          <div style={{display:"flex",alignItems:"center",gap:7}}>
            <span style={{fontSize:22,fontWeight:700,letterSpacing:"-0.3px",color:C.black}}>{profile.name}</span>
            <span style={{fontSize:20,color:C.label2,fontWeight:300}}>{profile.age}</span>
            {profile.verified&&<IcoVerified/>}
            <span style={{marginLeft:"auto",background:C.gray6,borderRadius:20,
              padding:"2px 9px",fontSize:12,fontWeight:500,color:C.label2}}>
              HCP {profile.handicap}
            </span>
          </div>
          <div style={{color:C.gray,fontSize:12,display:"flex",gap:8}}>
            <span>üìç {profile.distance} km</span>
            <span>¬∑</span>
            <span>{profile.lookingFor[0]}</span>
          </div>
          <div style={{display:"flex",flexWrap:"wrap",gap:5,marginTop:2}}>
            {profile.tags.slice(0,4).map(t=><Chip key={t} label={t} sm/>)}
          </div>
          <p style={{color:C.label2,fontSize:13,lineHeight:1.4,marginTop:1,
            overflow:"hidden",display:"-webkit-box",
            WebkitLineClamp:2,WebkitBoxOrient:"vertical"}}>{profile.bio}</p>
        </div>
      </div>
    </div>
  );
}

function MatchModal({profile,onMsg,onKeep}){
  return(
    <div style={{position:"absolute",inset:0,zIndex:200,
      background:"linear-gradient(160deg,#0A0A0A 0%,#161616 100%)",
      display:"flex",flexDirection:"column",alignItems:"center",
      justifyContent:"center",padding:"0 32px"}}>
      <div style={{fontSize:52,marginBottom:20,animation:"pop 0.5s cubic-bezier(0.34,1.56,0.64,1)"}}>
        üéâ
      </div>
      <h1 style={{color:C.white,fontSize:32,fontWeight:700,letterSpacing:"-0.5px",
        marginBottom:10,textAlign:"center"}}>It's a Match!</h1>
      <p style={{color:"rgba(255,255,255,0.45)",fontSize:16,marginBottom:48,textAlign:"center"}}>
        You and {profile.name} both want to play
      </p>
      <div style={{display:"flex",gap:20,marginBottom:52}}>
        {[DB.me.photos[0],profile.photos[0]].map((src,i)=>(
          <div key={i} style={{width:108,height:108,borderRadius:54,overflow:"hidden",
            border:"2.5px solid rgba(255,255,255,0.18)",
            boxShadow:"0 10px 40px rgba(0,0,0,0.5)"}}>
            <img src={src} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
          </div>
        ))}
      </div>
      <div style={{width:"100%",display:"flex",flexDirection:"column",gap:12}}>
        <button onClick={onMsg} className="press" style={{
          width:"100%",padding:"16px",borderRadius:14,border:"none",
          background:C.white,color:C.black,fontSize:17,fontWeight:600,
          cursor:"pointer",fontFamily:"inherit"}}>Send a message</button>
        <button onClick={onKeep} className="press" style={{
          background:"transparent",border:"1px solid rgba(255,255,255,0.18)",
          borderRadius:14,color:"rgba(255,255,255,0.55)",padding:"15px",
          width:"100%",fontSize:16,cursor:"pointer",fontFamily:"inherit"}}>
          Keep swiping
        </button>
      </div>
    </div>
  );
}

function Discover(){
  const{goChat}=useCtx();
  const[queue,setQueue]=useState([...DB.profiles]);
  const[swiped,setSwiped]=useState([]);
  const[match,setMatch]=useState(null);

  const doSwipe=useCallback((dir,pro)=>{
    setSwiped(s=>[...s,{id:pro.id,dir}]);
    if(dir==="like"&&Math.random()>0.4) setMatch(pro);
    setQueue(q=>q.filter(p=>p.id!==pro.id));
  },[]);

  const rewind=()=>{
    if(!swiped.length)return;
    const last=swiped[swiped.length-1];
    const pro=DB.profiles.find(p=>p.id===last.id);
    if(pro){setQueue(q=>[...q,pro]);setSwiped(s=>s.slice(0,-1));}
  };

  const vis=queue.slice(-4);
  const top=vis[vis.length-1];

  return(
    <div style={{position:"absolute",inset:0,background:C.bg2,display:"flex",flexDirection:"column"}}>
      {match&&<MatchModal profile={match}
        onMsg={()=>{const m=DB.matches.find(x=>x.userId===match.id)||DB.matches[0];setMatch(null);goChat(m);}}
        onKeep={()=>setMatch(null)}/>}

      <div style={{flex:1,position:"relative",padding:"10px 14px 6px"}}>
        {queue.length===0?(
          <div style={{height:"100%",display:"flex",flexDirection:"column",
            alignItems:"center",justifyContent:"center",gap:18,padding:"0 40px"}}>
            <div style={{fontSize:60}}>üèåÔ∏è</div>
            <h3 style={{fontSize:22,fontWeight:700,letterSpacing:"-0.3px",textAlign:"center"}}>
              No more golfers nearby
            </h3>
            <p style={{color:C.gray,textAlign:"center",lineHeight:1.6,fontSize:15}}>
              Expand your distance in Filters to find more
            </p>
            <button onClick={()=>setQueue([...DB.profiles])} className="press" style={{
              padding:"13px 28px",borderRadius:14,border:"none",
              background:C.black,color:C.white,fontSize:16,fontWeight:600,
              cursor:"pointer",fontFamily:"inherit"}}>Refresh</button>
          </div>
        ):(
          vis.map((p,i,arr)=>{
            const isTop=i===arr.length-1;
            const off=(arr.length-1-i)*10;
            return <Card key={p.id} profile={p} isTop={isTop} zOff={off} onSwipe={d=>doSwipe(d,p)}/>;
          })
        )}
      </div>

      {queue.length>0&&(
        <div style={{paddingBottom:14,paddingTop:8,
          display:"flex",justifyContent:"center",alignItems:"center",gap:20,flexShrink:0}}>
          <ABtn icon="back" sz={46} onPress={rewind} ghost/>
          <ABtn icon="X" sz={60} onPress={()=>top&&doSwipe("pass",top)} danger/>
          <ABtn icon="*" sz={46} onPress={()=>top&&doSwipe("super",top)} ghost/>
          <ABtn icon="heart" sz={60} onPress={()=>top&&doSwipe("like",top)} green/>
        </div>
      )}
    </div>
  );
}

function ABtn({icon,sz,onPress,danger,green,ghost}){
  const[pr,setPr]=useState(false);
  const bg=green?"#34C759":danger?"#FF3B30":C.bg;
  const col=(green||danger)?C.white:C.gray;
  const iconMap={back:"‚Ü©",X:"‚úï",heart:"‚ô•","*":"‚òÖ"};
  const displayIcon=iconMap[icon]||icon;
  return(
    <button onMouseDown={()=>setPr(true)} onMouseUp={()=>setPr(false)}
      onClick={onPress} style={{
        width:sz+12,height:sz+12,borderRadius:"50%",
        background:bg,
        border:(green||danger)?"none":("1.5px solid "+C.gray5),
        fontSize:sz*0.42,cursor:"pointer",
        display:"flex",alignItems:"center",justifyContent:"center",
        boxShadow:(green||danger)?("0 4px 20px "+bg+"55"):"0 2px 10px rgba(0,0,0,0.07)",
        color:col,
        transform:pr?"scale(0.9)":"scale(1)",
        transition:"transform 0.12s",
        fontFamily:"inherit"}}>
      {displayIcon}
    </button>
  );
}

function Nearby(){
  const[view,setView]=useState("list");
  const[sel,setSel]=useState(null);
  const pins=[
    {p:DB.profiles[0],x:48,y:36},{p:DB.profiles[1],x:31,y:55},
    {p:DB.profiles[2],x:65,y:42},{p:DB.profiles[3],x:55,y:65},
    {p:DB.profiles[4],x:22,y:34},{p:DB.profiles[5],x:72,y:58},
  ];
  return(
    <div style={{position:"absolute",inset:0,background:C.bg2,display:"flex",flexDirection:"column"}}>
      <div style={{padding:"10px 16px",flexShrink:0}}>
        <div style={{display:"flex",background:C.bg,borderRadius:10,padding:2,
          boxShadow:"0 1px 4px rgba(0,0,0,0.06)"}}>
          {["list","map"].map(v=>(
            <button key={v} onClick={()=>setView(v)} style={{
              flex:1,padding:"8px",border:"none",borderRadius:9,
              background:v===view?C.bg2:"transparent",
              color:v===view?C.black:C.gray2,
              fontSize:14,fontWeight:v===view?600:400,
              cursor:"pointer",transition:"all 0.18s",fontFamily:"inherit",
              boxShadow:v===view?"0 1px 4px rgba(0,0,0,0.07)":"none"}}>
              {v==="list"?"List":"Map"}
            </button>
          ))}
        </div>
      </div>

      {view==="list"?(
        <div style={{flex:1,overflowY:"auto",padding:"0 16px 16px"}}>
          {DB.profiles.map(p=>(
            <div key={p.id} style={{background:C.bg,borderRadius:16,padding:"13px 15px",
              marginBottom:10,display:"flex",alignItems:"center",gap:14,
              boxShadow:"0 1px 5px rgba(0,0,0,0.06)",cursor:"pointer"}}>
              <div style={{width:58,height:58,borderRadius:29,overflow:"hidden",flexShrink:0}}>
                <Img src={p.photos[0]} style={{width:58,height:58}}/>
              </div>
              <div style={{flex:1,minWidth:0}}>
                <div style={{fontWeight:600,fontSize:16,color:C.black,
                  display:"flex",alignItems:"center",gap:6,marginBottom:3}}>
                  {p.name}, {p.age} {p.verified&&<IcoVerified/>}
                </div>
                <div style={{color:C.gray,fontSize:13,marginBottom:6}}>
                  {p.distance} km away
                </div>
                <div style={{display:"flex",flexWrap:"wrap",gap:5}}>
                  {p.tags.slice(0,3).map(t=><Chip key={t} label={t} sm/>)}
                </div>
              </div>
              <div style={{background:C.gray6,borderRadius:20,padding:"3px 10px",
                fontSize:12,fontWeight:600,color:C.label2,flexShrink:0}}>
                HCP {p.handicap}
              </div>
            </div>
          ))}
        </div>
      ):(
        <div style={{flex:1,position:"relative",margin:"0 14px 14px",borderRadius:18,overflow:"hidden",
          boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}>
          <div style={{position:"absolute",inset:0,background:"#E6EDD8"}}>
            <svg style={{position:"absolute",inset:0,width:"100%",height:"100%"}}
              viewBox="0 0 400 600" preserveAspectRatio="xMidYMid slice">
              <rect width="400" height="600" fill="#E6EDD8"/>
              <path d="M0 300 Q100 282 200 300 Q300 318 400 300" stroke="#fff" strokeWidth="10" fill="none"/>
              <path d="M200 0 Q186 150 200 300 Q214 450 200 600" stroke="#fff" strokeWidth="10" fill="none"/>
              <path d="M0 160 Q200 153 400 160" stroke="#EDE8D8" strokeWidth="6" fill="none"/>
              <path d="M0 450 Q200 457 400 450" stroke="#EDE8D8" strokeWidth="6" fill="none"/>
              <path d="M110 0 Q117 300 110 600" stroke="#EDE8D8" strokeWidth="6" fill="none"/>
              <path d="M300 0 Q293 300 300 600" stroke="#EDE8D8" strokeWidth="6" fill="none"/>
              <ellipse cx="305" cy="180" rx="76" ry="58" fill="#B8D898" opacity="0.9"/>
              <ellipse cx="305" cy="180" rx="55" ry="38" fill="#A0CC80" opacity="0.9"/>
              <text x="305" y="186" fill="#3A6820" fontSize="9" fontWeight="600" textAnchor="middle">Golf Club</text>
              <ellipse cx="75" cy="435" rx="52" ry="44" fill="#C0E0A0" opacity="0.7"/>
              <path d="M345 390 Q365 365 394 372 Q410 388 400 410 Q382 428 360 418 Q340 405 345 390"
                fill="#9CCFF5" opacity="0.65"/>
              {[[58,72],[76,72],[96,72],[116,72],[58,96],[76,96],[55,260],[75,260],[140,425],[160,425],[180,425]].map(([x,y],i)=>(
                <rect key={i} x={x} y={y} width="14" height="14" rx="2" fill="#D0C8B8"/>
              ))}
            </svg>

            {pins.map(({p,x,y})=>(
              <div key={p.id} onClick={()=>setSel(sel?.id===p.id?null:p)} style={{
                position:"absolute",left:`${x}%`,top:`${y}%`,
                transform:"translate(-50%,-50%)",cursor:"pointer",zIndex:10}}>
                <div style={{
                  width:44,height:44,borderRadius:22,overflow:"hidden",
                  border:`2.5px solid ${sel?.id===p.id?C.black:C.white}`,
                  transform:sel?.id===p.id?"scale(1.2)":"scale(1)",
                  transition:"all 0.2s",
                  boxShadow:sel?.id===p.id?"0 6px 20px rgba(0,0,0,0.3)":"0 3px 10px rgba(0,0,0,0.18)"}}>
                  <img src={p.photos[0]} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
                </div>
                <div style={{position:"absolute",bottom:-6,left:"50%",transform:"translateX(-50%)",
                  width:0,height:0,
                  borderLeft:"5px solid transparent",borderRight:"5px solid transparent",
                  borderTop:`7px solid ${sel?.id===p.id?C.black:C.white}`}}/>
              </div>
            ))}

            <div style={{position:"absolute",left:"50%",top:"49%",transform:"translate(-50%,-50%)",zIndex:20}}>
              <div style={{width:50,height:50,borderRadius:25,overflow:"hidden",
                border:"2.5px solid #007AFF",
                boxShadow:"0 0 0 5px rgba(0,122,255,0.14)"}}>
                <img src={DB.me.photos[0]} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
              </div>
            </div>
          </div>

          {sel&&(
            <div style={{position:"absolute",bottom:0,left:0,right:0,
              background:C.bg,borderRadius:"18px 18px 0 0",
              padding:"16px 18px 28px",
              boxShadow:"0 -4px 28px rgba(0,0,0,0.1)",
              animation:"slideUp 0.25s ease"}}>
              <div style={{display:"flex",alignItems:"center",gap:14}}>
                <div style={{width:60,height:60,borderRadius:30,overflow:"hidden",flexShrink:0}}>
                  <img src={sel.photos[0]} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
                </div>
                <div style={{flex:1}}>
                  <div style={{fontWeight:700,fontSize:18,letterSpacing:"-0.3px",
                    display:"flex",alignItems:"center",gap:6}}>
                    {sel.name}, {sel.age} {sel.verified&&<IcoVerified/>}
                  </div>
                  <div style={{color:C.gray,fontSize:13,marginTop:2}}>
                    {sel.distance} km away ¬∑ HCP {sel.handicap}
                  </div>
                  <div style={{display:"flex",gap:5,marginTop:6,flexWrap:"wrap"}}>
                    {sel.tags.slice(0,3).map(t=><Chip key={t} label={t} sm/>)}
                  </div>
                </div>
                <button onClick={()=>setSel(null)} style={{
                  width:28,height:28,borderRadius:14,border:"none",
                  background:C.gray6,color:C.gray2,fontSize:14,
                  cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}}>
                  x</button>
              </div>
              <p style={{color:C.label2,fontSize:14,marginTop:12,lineHeight:1.5}}>{sel.bio}</p>
              <div style={{display:"flex",gap:10,marginTop:14}}>
                <button style={{flex:1,padding:"11px",borderRadius:12,
                  border:`1.5px solid ${C.gray4}`,background:C.bg,
                  color:C.black,fontSize:14,fontWeight:500,cursor:"pointer",fontFamily:"inherit"}}>
                  View Profile
                </button>
                <button style={{flex:1,padding:"11px",borderRadius:12,
                  border:"none",background:C.black,
                  color:C.white,fontSize:14,fontWeight:600,cursor:"pointer",fontFamily:"inherit"}}>
                  Like
                </button>
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  );
}

function ChatList({onOpen}){
  const unread=m=>m.messages.some(x=>x.from!=="me"&&!x.read);
  return(
    <div style={{position:"absolute",inset:0,background:C.bg,overflowY:"auto"}}>
      <div style={{padding:"14px 16px 10px"}}>
        <div style={{fontSize:12,fontWeight:600,color:C.gray,
          letterSpacing:"0.4px",textTransform:"uppercase",marginBottom:14}}>New Matches</div>
        <div style={{display:"flex",gap:16,overflowX:"auto",paddingBottom:4}}>
          {DB.matches.map(m=>(
            <div key={m.id} onClick={()=>onOpen(m)} style={{flexShrink:0,textAlign:"center",cursor:"pointer"}}>
              <div style={{position:"relative"}}>
                <div style={{width:68,height:68,borderRadius:34,overflow:"hidden",
                  border:`2.5px solid ${unread(m)?C.black:C.gray5}`}}>
                  <img src={m.photo} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
                </div>
                {unread(m)&&<div style={{position:"absolute",top:1,right:1,
                  width:16,height:16,borderRadius:8,
                  background:C.red,border:`2px solid ${C.bg}`}}/>}
              </div>
              <div style={{fontSize:12,marginTop:6,fontWeight:500,color:C.label2}}>{m.name}</div>
            </div>
          ))}
        </div>
      </div>
      <div style={{height:1,background:C.gray5,margin:"0 16px"}}/>
      <div style={{padding:"4px 0"}}>
        {DB.matches.map(m=>{
          const last=m.messages[m.messages.length-1];
          const has=unread(m);
          return(
            <div key={m.id} onClick={()=>onOpen(m)} style={{
              padding:"12px 16px",display:"flex",alignItems:"center",
              gap:14,cursor:"pointer",borderBottom:`1px solid ${C.gray6}`}}>
              <div style={{width:54,height:54,borderRadius:27,overflow:"hidden",flexShrink:0}}>
                <img src={m.photo} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
              </div>
              <div style={{flex:1,minWidth:0}}>
                <div style={{display:"flex",justifyContent:"space-between",marginBottom:3}}>
                  <span style={{fontWeight:600,fontSize:16,color:C.black}}>{m.name}</span>
                  <span style={{color:C.gray2,fontSize:12}}>{last?.time}</span>
                </div>
                <div style={{color:has?C.black:C.gray,fontSize:14,
                  fontWeight:has?500:400,
                  overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}>
                  {last?.text}
                </div>
              </div>
              {has&&<div style={{width:9,height:9,borderRadius:5,background:C.black,flexShrink:0}}/>}
            </div>
          );
        })}
      </div>
    </div>
  );
}

function ChatScreen({match,onBack}){
  const[msgs,setMsgs]=useState(match.messages||[]);
  const[input,setInput]=useState("");
  const[typing,setTyping]=useState(false);
  const bot=useRef(null);
  useEffect(()=>{bot.current?.scrollIntoView({behavior:"smooth"});},[msgs,typing]);

  const send=()=>{
    if(!input.trim())return;
    setMsgs(m=>[...m,{id:`${Date.now()}`,from:"me",text:input,time:"Now",read:false}]);
    setInput("");setTyping(true);
    setTimeout(()=>{
      setTyping(false);
      const r=["Sounds great!","Let's do it!","What course?","I'll book a tee time","Saturday works!"];
      setMsgs(m=>[...m,{id:`${Date.now()+1}`,from:match.userId,
        text:r[Math.floor(Math.random()*r.length)],time:"Now",read:false}]);
    },1400);
  };

  return(
    <div style={{position:"absolute",inset:0,background:C.bg,display:"flex",flexDirection:"column"}}>
      <div style={{background:C.bg,borderBottom:`1px solid ${C.gray5}`,
        padding:"10px 16px",display:"flex",alignItems:"center",gap:12,flexShrink:0}}>
        <button onClick={onBack} style={{background:"none",border:"none",cursor:"pointer",
          padding:"6px 8px",display:"flex",alignItems:"center",gap:6,
          color:C.blue,fontSize:17,fontFamily:"inherit"}}>
          <IcoBack/>
        </button>
        <div style={{width:40,height:40,borderRadius:20,overflow:"hidden"}}>
          <img src={match.photo} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
        </div>
        <div style={{flex:1}}>
          <div style={{fontWeight:600,fontSize:16,letterSpacing:"-0.2px"}}>{match.name}</div>
          <div style={{fontSize:12,color:typing?C.green:C.gray,display:"flex",alignItems:"center",gap:4}}>
            <div style={{width:6,height:6,borderRadius:3,background:C.green,
              animation:"pulse 2s infinite"}}/>
            {typing?"typing...":"online"}
          </div>
        </div>
      </div>

      <div style={{flex:1,overflowY:"auto",padding:"14px 16px 8px"}}>
        {msgs.map(msg=>{
          const me=msg.from==="me";
          return(
            <div key={msg.id} style={{display:"flex",justifyContent:me?"flex-end":"flex-start",
              marginBottom:10,alignItems:"flex-end",gap:8}}>
              {!me&&<div style={{width:28,height:28,borderRadius:14,overflow:"hidden",flexShrink:0}}>
                <img src={match.photo} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
              </div>}
              <div style={{maxWidth:"72%",padding:"10px 14px",borderRadius:20,
                background:me?C.black:C.gray6,color:me?C.white:C.black,
                fontSize:15,lineHeight:1.45,
                borderBottomRightRadius:me?4:20,borderBottomLeftRadius:me?20:4}}>
                {msg.text}
                <div style={{fontSize:10,opacity:0.38,marginTop:4,textAlign:"right"}}>{msg.time}</div>
              </div>
            </div>
          );
        })}
        {typing&&(
          <div style={{display:"flex",gap:5,marginLeft:36,alignItems:"center",marginBottom:10}}>
            {[0,1,2].map(i=>(
              <div key={i} style={{width:8,height:8,borderRadius:4,background:C.gray4,
                animation:`pulse 1s ${i*0.2}s infinite`}}/>
            ))}
          </div>
        )}
        <div ref={bot}/>
      </div>

      <div style={{background:C.bg,padding:"10px 14px",
        paddingBottom:"max(20px,env(safe-area-inset-bottom,20px))",
        display:"flex",gap:10,alignItems:"flex-end",
        borderTop:`1px solid ${C.gray5}`,flexShrink:0}}>
        <div style={{flex:1,background:C.gray6,borderRadius:22,padding:"9px 14px"}}>
          <textarea value={input} onChange={e=>setInput(e.target.value)}
            onKeyDown={e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();send();}}}
            placeholder="Message..." rows={1}
            style={{width:"100%",border:"none",background:"transparent",
              fontSize:16,outline:"none",resize:"none",
              fontFamily:"inherit",color:C.black,maxHeight:80}}/>
        </div>
        <button onClick={send} style={{width:36,height:36,borderRadius:18,border:"none",
          background:input.trim()?C.black:C.gray5,color:C.white,fontSize:16,
          cursor:"pointer",transition:"background 0.15s",flexShrink:0,
          display:"flex",alignItems:"center",justifyContent:"center"}}>up</button>
      </div>
    </div>
  );
}

function ProfileScreen({onBack}){
  const[user,setUser]=useState({...DB.me});
  const[editing,setEditing]=useState(false);
  const[toast,setToast]=useState(false);
  const up=(k,v)=>setUser(u=>({...u,[k]:v}));

  const save=()=>{
    Object.assign(DB.me,user);
    setEditing(false);setToast(true);
    setTimeout(()=>setToast(false),2000);
  };

  return(
    <div style={{position:"absolute",inset:0,background:C.bg2,display:"flex",flexDirection:"column"}}>
      <div style={{background:C.bg,borderBottom:`1px solid ${C.gray5}`,
        padding:"12px 16px",display:"flex",alignItems:"center",flexShrink:0}}>
        <button onClick={onBack} style={{background:"none",border:"none",cursor:"pointer",
          padding:"6px 8px",display:"flex",alignItems:"center",
          color:C.blue,fontSize:17,fontFamily:"inherit"}}><IcoBack/></button>
        <span style={{flex:1,textAlign:"center",fontSize:17,fontWeight:600,letterSpacing:"-0.2px"}}>Profile</span>
        <button onClick={()=>editing?save():setEditing(true)} style={{
          background:"none",border:"none",color:C.blue,
          fontSize:17,fontWeight:editing?600:400,
          cursor:"pointer",fontFamily:"inherit",padding:"6px 4px"}}>
          {editing?"Done":"Edit"}
        </button>
      </div>

      {toast&&<div style={{position:"absolute",top:66,left:"50%",transform:"translateX(-50%)",
        background:C.black,color:C.white,borderRadius:20,
        padding:"8px 20px",fontSize:13,fontWeight:500,zIndex:50,
        boxShadow:"0 4px 20px rgba(0,0,0,0.18)"}}>Profile saved</div>}

      <div style={{flex:1,overflowY:"auto"}}>
        <div style={{position:"relative",height:290}}>
          <Img src={user.photos[0]||FALLBACK} style={{width:"100%",height:290}}/>
          <div style={{position:"absolute",inset:0,
            background:"linear-gradient(transparent 45%,rgba(0,0,0,0.58))"}}/>
          {editing&&<button style={{position:"absolute",top:14,right:14,
            background:"rgba(0,0,0,0.4)",color:C.white,border:"none",
            borderRadius:20,padding:"6px 14px",cursor:"pointer",
            fontSize:13,fontFamily:"inherit",backdropFilter:"blur(8px)"}}>
            Edit photo</button>}
          <div style={{position:"absolute",bottom:16,left:18}}>
            <div style={{color:C.white,fontSize:26,fontWeight:700,letterSpacing:"-0.3px",
              display:"flex",alignItems:"center",gap:8}}>
              {user.name}, {user.age}
              {user.verified&&<IcoVerified/>}
            </div>
            <div style={{color:"rgba(255,255,255,0.6)",fontSize:14,marginTop:3}}>
              Handicap {user.handicap}
            </div>
          </div>
        </div>

        <div style={{padding:"14px 16px",display:"flex",flexDirection:"column",gap:10}}>

          <div style={{background:C.bg,borderRadius:14,padding:"13px 16px",
            display:"flex",alignItems:"center",gap:14}}>
            <div style={{flex:1}}>
              <div style={{fontWeight:500,fontSize:15}}>Show me in Discover</div>
              <div style={{color:C.gray,fontSize:13,marginTop:2}}>
                {user.discoveryEnabled?"Visible to others":"Hidden from discovery"}
              </div>
            </div>
            <Toggle on={user.discoveryEnabled} set={()=>up("discoveryEnabled",!user.discoveryEnabled)}/>
          </div>

          <div style={{background:C.bg,borderRadius:14,overflow:"hidden"}}>
            <div style={{padding:"12px 16px 6px",fontSize:12,fontWeight:600,color:C.gray,
              letterSpacing:"0.4px",textTransform:"uppercase"}}>About</div>
            <div style={{padding:"0 16px 14px"}}>
              {editing?(
                <>
                  <textarea value={user.bio} onChange={e=>up("bio",e.target.value.slice(0,150))}
                    style={{width:"100%",background:C.gray6,border:"none",borderRadius:10,
                      padding:"12px",fontSize:15,resize:"none",height:90,
                      fontFamily:"inherit",color:C.black,outline:"none"}}/>
                  <div style={{fontSize:11,color:C.gray,textAlign:"right",marginTop:4}}>{user.bio.length}/150</div>
                </>
              ):<p style={{color:C.label2,fontSize:15,lineHeight:1.55}}>{user.bio}</p>}
            </div>
          </div>

          <div style={{background:C.bg,borderRadius:14,padding:"12px 16px"}}>
            <div style={{fontSize:12,fontWeight:600,color:C.gray,
              letterSpacing:"0.4px",textTransform:"uppercase",marginBottom:12}}>Vibe</div>
            <div style={{display:"flex",flexWrap:"wrap",gap:8}}>
              {editing
                ?TAGS.map(t=><Chip key={t} label={t} on={user.tags.includes(t)}
                    onClick={()=>setUser(u=>({...u,tags:u.tags.includes(t)?u.tags.filter(x=>x!==t):[...u.tags,t]}))}/>)
                :user.tags.map(t=><Chip key={t} label={t} on/>)}
            </div>
          </div>

          <div style={{background:"linear-gradient(135deg,#111 0%,#222 100%)",
            borderRadius:14,padding:"18px 16px"}}>
            <div style={{color:C.white,fontWeight:700,fontSize:18,marginBottom:5,letterSpacing:"-0.3px"}}>
              swngr+
            </div>
            <div style={{color:"rgba(255,255,255,0.5)",fontSize:14,marginBottom:16,lineHeight:1.5}}>
              Unlimited likes, Super Likes, Rewind, Advanced filters
            </div>
            <button className="press" style={{background:C.white,color:C.black,border:"none",
              borderRadius:10,padding:"9px 20px",fontWeight:600,fontSize:14,
              cursor:"pointer",fontFamily:"inherit"}}>Upgrade to Plus</button>
          </div>

          <div style={{background:C.bg,borderRadius:14,overflow:"hidden"}}>
            {[["üîî","Notifications"],["üîí","Privacy & Safety"],["üìç","Location"],["üìÑ","Terms & Privacy"]].map(([ic,lbl],i,arr)=>(
              <div key={i} style={{padding:"14px 16px",
                borderBottom:i<arr.length-1?`1px solid ${C.gray6}`:"none",
                display:"flex",alignItems:"center",gap:12,cursor:"pointer"}}>
                <span style={{fontSize:20}}>{ic}</span>
                <span style={{flex:1,fontSize:16,color:C.black}}>{lbl}</span>
                <span style={{color:C.gray3,fontSize:18}}>‚Ä∫</span>
              </div>
            ))}
          </div>

          <button style={{background:C.bg,borderRadius:14,padding:"14px 16px",
            border:"none",width:"100%",textAlign:"left",
            fontSize:16,color:C.red,cursor:"pointer",fontFamily:"inherit"}}>
            Delete Account
          </button>
          <div style={{height:16}}/>
        </div>
      </div>
    </div>
  );
}

function Filters({onClose}){
  const[dist,setDist]=useState(25);
  const[aMin,setAMin]=useState(21);
  const[aMax,setAMax]=useState(55);
  const[hMin,setHMin]=useState(0);
  const[hMax,setHMax]=useState(36);
  const rows=[
    {l:"Distance",v:`${dist} km`,min:1,max:150,val:dist,set:setDist},
    {l:"Min Age",v:`${aMin}`,min:18,max:aMax-1,val:aMin,set:setAMin},
    {l:"Max Age",v:`${aMax}`,min:aMin+1,max:70,val:aMax,set:setAMax},
    {l:"Min Handicap",v:`${hMin}`,min:0,max:hMax-1,val:hMin,set:setHMin},
    {l:"Max Handicap",v:`${hMax}`,min:hMin+1,max:54,val:hMax,set:setHMax},
  ];
  return(
    <div style={{position:"absolute",inset:0,background:C.bg,zIndex:60,display:"flex",flexDirection:"column"}}>
      <div style={{paddingTop:"env(safe-area-inset-top,44px)",flexShrink:0}}/>
      <div style={{padding:"12px 16px",borderBottom:`1px solid ${C.gray5}`,
        display:"flex",alignItems:"center",flexShrink:0}}>
        <button onClick={onClose} style={{background:"none",border:"none",
          color:C.blue,fontSize:17,cursor:"pointer",fontFamily:"inherit",padding:"4px 0"}}>Cancel</button>
        <h2 style={{flex:1,textAlign:"center",fontSize:17,fontWeight:600,letterSpacing:"-0.2px",margin:0}}>
          Filters
        </h2>
        <button onClick={onClose} style={{background:"none",border:"none",
          color:C.blue,fontSize:17,fontWeight:600,cursor:"pointer",fontFamily:"inherit",padding:"4px 0"}}>
          Apply
        </button>
      </div>
      <div style={{flex:1,overflowY:"auto",padding:"20px"}}>
        {rows.map(r=>(
          <div key={r.l} style={{marginBottom:28}}>
            <div style={{display:"flex",justifyContent:"space-between",
              alignItems:"center",marginBottom:12}}>
              <span style={{fontSize:16,fontWeight:500,color:C.black}}>{r.l}</span>
              <span style={{background:C.gray6,color:C.label2,borderRadius:20,
                padding:"3px 12px",fontSize:14,fontWeight:500}}>{r.v}</span>
            </div>
            <input type="range" min={r.min} max={r.max} value={r.val}
              onChange={e=>r.set(Number(e.target.value))} style={{width:"100%"}}/>
          </div>
        ))}
        <div style={{fontSize:12,fontWeight:600,color:C.gray,
          letterSpacing:"0.4px",textTransform:"uppercase",marginBottom:12}}>Looking For</div>
        {LF.map(opt=>(
          <div key={opt} style={{padding:"13px 16px",borderRadius:12,marginBottom:8,
            background:C.gray6,display:"flex",alignItems:"center",gap:12,cursor:"pointer"}}>
            <div style={{width:22,height:22,borderRadius:11,
              border:`1.5px solid ${C.gray3}`,background:C.bg}}/>
            <span style={{fontSize:16,color:C.black}}>{opt}</span>
          </div>
        ))}
        <div style={{height:16}}/>
      </div>
    </div>
  );
}

/* TOP NAV */
function TopNav({onProfile,onFilters}){
  return(
    <div style={{height:50,background:C.bg,borderBottom:`1px solid ${C.gray5}`,
      display:"flex",alignItems:"center",padding:"0 16px",flexShrink:0,position:"relative"}}>
      <button onClick={onProfile} style={{background:"none",border:"none",cursor:"pointer",padding:4}}>
        <div style={{width:32,height:32,borderRadius:16,overflow:"hidden",background:C.gray6}}>
          {DB.me.photos[0]
            ?<img src={DB.me.photos[0]} style={{width:"100%",height:"100%",objectFit:"cover"}}/>
            :<div style={{width:"100%",height:"100%",display:"flex",alignItems:"center",
                justifyContent:"center",fontSize:16}}>üë§</div>}
        </div>
      </button>
      <div style={{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}}>
        <Logo size={18} light={false}/>
      </div>
      <button onClick={onFilters} style={{background:"none",border:"none",
        cursor:"pointer",padding:8,marginLeft:"auto"}}>
        <svg width="18" height="14" viewBox="0 0 18 14" fill="none">
          <path d="M1 1h16M3 7h12M6 13h6" stroke={C.black} strokeWidth="1.8" strokeLinecap="round"/>
        </svg>
      </button>
    </div>
  );
}

/* TABS */
function BottomTabs({tab,onTab,unread}){
  const ts=[
    {id:"swipe",label:"Discover",icon:(a)=>(
      <svg width="26" height="26" viewBox="0 0 26 26" fill="none">
        <circle cx="13" cy="13" r="9" stroke={a?C.black:C.gray2} strokeWidth="1.8"/>
        {[[10,10],[14,10],[12,13],[10,15],[14,15]].map(([x,y],i)=>(
          <circle key={i} cx={x} cy={y} r="1.1" fill={a?C.black:C.gray2}/>
        ))}
      </svg>)},
    {id:"nearby",label:"Nearby",icon:(a)=>(
      <svg width="24" height="26" viewBox="0 0 24 26" fill="none">
        <path d="M12 1C8.13 1 5 4.13 5 8c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"
          fill={a?C.black:"none"} stroke={a?C.black:C.gray2} strokeWidth="1.8"/>
        <circle cx="12" cy="8" r="2.5" fill={a?C.white:C.gray2}/>
      </svg>)},
    {id:"chat",label:"Chat",icon:(a)=>(
      <svg width="26" height="24" viewBox="0 0 26 24" fill="none">
        <path d="M23 14a2 2 0 01-2 2H8l-5 5V4a2 2 0 012-2h16a2 2 0 012 2z"
          fill={a?C.black:"none"} stroke={a?C.black:C.gray2} strokeWidth="1.8" strokeLinejoin="round"/>
      </svg>)},
  ];
  return(
    <div style={{background:C.bg,borderTop:`1px solid rgba(60,60,67,0.29)`,
      display:"flex",flexShrink:0,
      paddingBottom:"env(safe-area-inset-bottom,0px)"}}>
      {ts.map(t=>{
        const active=tab===t.id;
        const badge=t.id==="chat"&&unread>0?unread:0;
        return(
          <button key={t.id} onClick={()=>onTab(t.id)} style={{
            flex:1,border:"none",background:"none",cursor:"pointer",
            display:"flex",flexDirection:"column",alignItems:"center",
            justifyContent:"center",gap:3,padding:"10px 0",position:"relative"}}>
            <div style={{position:"relative"}}>
              {t.icon(active)}
              {badge>0&&<div style={{position:"absolute",top:-3,right:-5,
                width:16,height:16,borderRadius:8,
                background:C.red,border:`2px solid ${C.bg}`,
                display:"flex",alignItems:"center",justifyContent:"center"}}>
                <span style={{color:C.white,fontSize:9,fontWeight:700}}>{badge}</span>
              </div>}
            </div>
            <span style={{fontSize:10,letterSpacing:"-0.1px",
              fontWeight:active?600:400,
              color:active?C.black:C.gray2,fontFamily:"inherit"}}>{t.label}</span>
          </button>
        );
      })}
    </div>
  );
}

/* ROOT */
function App(){
  const[screen,setScreen]=useState("splash");
  const[tab,setTab]=useState("swipe");
  const[filters,setFilters]=useState(false);
  const[profile,setProfile]=useState(false);
  const[chat,setChat]=useState(null);

  const unread=DB.matches.reduce((a,m)=>a+m.messages.filter(x=>x.from!=="me"&&!x.read).length,0);
  const ctx={goChat:(m)=>{setChat(m);setTab("chat");setProfile(false);}};

  const statusBg=screen==="splash"?C.black:screen==="loading"?"#1A7A3C":C.bg;

  const mainContent=()=>{
    if(profile) return <ProfileScreen onBack={()=>setProfile(false)}/>;
    if(chat) return <ChatScreen match={chat} onBack={()=>setChat(null)}/>;
    return(
      <div style={{position:"absolute",inset:0,display:"flex",flexDirection:"column"}}>
        {filters&&<Filters onClose={()=>setFilters(false)}/>}
        <TopNav onProfile={()=>setProfile(true)} onFilters={()=>setFilters(true)}/>
        <div style={{flex:1,position:"relative",overflow:"hidden"}}>
          {tab==="swipe"&&<Discover/>}
          {tab==="nearby"&&<Nearby/>}
          {tab==="chat"&&<ChatList onOpen={m=>setChat(m)}/>}
        </div>
        <BottomTabs tab={tab} onTab={t=>{setTab(t);setChat(null);}} unread={unread}/>
      </div>
    );
  };

  return(
    <Ctx.Provider value={ctx}>
      <div style={{position:"fixed",inset:0,background:statusBg,
        display:"flex",flexDirection:"column",transition:"background 0.3s"}}>
        <div style={{paddingTop:"env(safe-area-inset-top,44px)",
          background:statusBg,flexShrink:0,transition:"background 0.3s"}}/>
        <div style={{flex:1,position:"relative",overflow:"hidden"}}>
          {screen==="splash"&&<Splash next={()=>setScreen("loading")}/>}
          {screen==="loading"&&<GrassLoad next={()=>setScreen("auth")}/>}
          {screen==="auth"&&<Auth next={()=>setScreen("onboard")}/>}
          {screen==="onboard"&&<Onboard done={()=>setScreen("main")}/>}
          {screen==="main"&&mainContent()}
        </div>
      </div>
    </Ctx.Provider>
  );
}

const loadingEl = document.getElementById('loading');
if(loadingEl) loadingEl.style.display='none';
ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
</script>
</body>
</html>